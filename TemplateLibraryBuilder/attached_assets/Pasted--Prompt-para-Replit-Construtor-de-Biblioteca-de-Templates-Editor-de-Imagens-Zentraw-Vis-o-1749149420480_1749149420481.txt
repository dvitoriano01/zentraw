# Prompt para Replit â€” Construtor de Biblioteca de Templates & Editor de Imagens Zentraw

## VisÃ£o Geral

VocÃª Ã© **um agente no Replit** responsÃ¡vel por criar **um editor de imagens semelhante ao CanvaÂ Pro** para a plataforma [Zentraw](https://www.zentraw.com). O projeto deve nascer modular e escalÃ¡vel, permitindo a adiÃ§Ã£o de **planos de assinatura** (Basic,â€¯Pro,â€¯Advanced) e um **painel de administraÃ§Ã£o** completo. Nosso primeiro objetivo Ã© **substituir o `TemplateÂ Manager (adminâ€‘complete.tsx)`** por uma alternativa criada do zero que:

1. **Salve** cada template como um arquivoÂ JSON independente dentro de `/src/templates`.
2. **Organize** todos os templates em uma biblioteca facilmente consultÃ¡vel por slug, tags e categoria.
3. Exponha funÃ§Ãµes CRUD (Create, Read, Update, Delete) para que o editor e o painel admin faÃ§am uso desses templates.
4. Seja simples de integrar na pÃ¡gina/app inicial da Zentraw.

## Stack & DependÃªncias Sugeridas

\| Ãrea | Lib/Stack |
\| â€” | â€” |
\| UIÂ Framework | **ReactÂ 18Â +Â Vite + TypeScript** |
\| CanvasÂ Engine | **Fabric.js** (ou Konva) |
\| StateÂ Mgmt | **Zustand** |
\| UIÂ Kit | **TailwindÂ CSS** + HeadlessÂ UI |
\| Auth | *placeholder*:Â Nextâ€‘AuthÂ ou Clerk |
\| Build/Test | VitestÂ +Â Playwright |

> **IMPORTANTE:** se jÃ¡ existir outra stack no workspace, adapte as instruÃ§Ãµes mantendo compatibilidade.

## Estrutura de Pastas Alvo

```
â”œâ”€ public/
â”‚  â””â”€ assets/
â”œâ”€ src/
â”‚  â”œâ”€ components/
â”‚  â”‚  â”œâ”€ editor/
â”‚  â”‚  â”œâ”€ templates/
â”‚  â”‚  â””â”€ ui/
â”‚  â”œâ”€ hooks/
â”‚  â”œâ”€ pages/        # ou /routes se usar ReactÂ Router
â”‚  â”œâ”€ services/
â”‚  â”‚  â””â”€ templateService.ts
â”‚  â”œâ”€ store/
â”‚  â”œâ”€ templates/    # <â€” JSONs de template ficam aqui
â”‚  â””â”€ utils/
â””â”€ README.md
```

## Fases & Entregas

Divida o desenvolvimento nos **5Â fases** abaixo. **Finalize cada fase com um commit e rodando testes.**

### FaseÂ 0Â â€”â€¯Bootstrap (ğŸŸ¢ Iniciar)

1. Criar projeto React/Vite com TypeScript.
2. Configurar TailwindÂ CSS.
3. Adicionar Fabric.js e Zustand.
4. Criar README com instruÃ§Ãµes de dev setup.

### FaseÂ 1Â â€”â€¯Core do Editor

1. Implementar `<CanvasEditor />` com:

   * AdiÃ§Ã£o/remoÃ§Ã£o/movimentaÃ§Ã£o de **shapes**, **textos** e **imagens**.
   * Suporte a **layers** e **undo/redo**.
   * ExportaÃ§Ã£o em **PNG/JPEG/SVG**.
2. Criar store global (Zustand) para estado do documento.
3. Escrever testes unitÃ¡rios para actions principais.

### FaseÂ 2Â â€”â€¯MÃ³dulo de Templates

1. Definir **interfaceÂ `TemplateSchema`** (id, name, category, tags\[], previewUrl, layers\[]â€¦).
2. Implementar `templateService.ts` com:

   * `loadAll()` â†’ lista todos JSONs em `/src/templates`.
   * `load(id)`
   * `save(template)`
   * `update(id, patch)`
   * `remove(id)`
3. Gerar **3Â templates de exemplo** (Cartaz,â€¯PostÂ IG,â€¯CapaÂ Single) salvos como JSON.
4. Criar `<TemplateGallery />` filtrÃ¡vel.
5. Conectar `<TemplateGallery />` ao `<CanvasEditor />`: clicar â†’ carrega no editor.

### FaseÂ 3Â â€”â€¯Planos & Controle de Acesso

1. Criar enum `PlanTier` (Basic|Pro|Advanced).
2. Mockar sistema de autenticaÃ§Ã£o (e.g. dummy user context).
3. Gatear recursos:

   * **Basic**: 720p export, 10Â templates, sem efeitos premium.
   * **Pro**: 1080p export, 100Â templates, efeitos premium.
   * **Advanced**: 4K export, templates ilimitados, batchâ€‘render de assets.
4. Adicionar banner de upgrade quando usuÃ¡rio exceder limite.

### FaseÂ 4Â â€”â€¯Painel Admin

1. Rota `/admin` protegida.
2. DashboardÂ cards com mÃ©tricas (totalÂ users, templates, renders).
3. CRUD GUI para templates (usa `templateService`).
4. Ferramenta de **importaÃ§Ã£o/exportaÃ§Ã£o** de coleÃ§Ã£o de templates (`.zip` + manifest).

### FaseÂ 5Â â€”â€¯IntegraÃ§Ã£o Final + QA

1. Integrar tudo na **landing/app inicial daÂ Zentraw** (placeholder `/app`).
2. Rodar e documentar **testesÂ e2e**.
3. Checklist de performance (LighthouseÂ â‰¥Â 90) e acessibilidade.
4. Atualizar README.

---

## Regras de Ouro para o Agente do Replit

1. **NÃ£o quebre funcionalidades existentes** ao corrigir bugs â€” escreva testes antes de mexer.
2. **Commits semÃ¢nticos** (`feat:`, `fix:`, `chore:` etc.).
3. Termine cada fase com `npm test` e `npm run lint` passando.
4. Documente *qualquer* decisÃ£o arquitetural no README.
5. ComentÃ¡rios de cÃ³digo devem ser em **inglÃªs**; README e UI, em **PTâ€‘BR**.

## Formato dos Templates

```jsonc
{
  "id": "capa-single-glitch",
  "name": "Capa Single Glitch",
  "category": "Music",
  "tags": ["capa", "glitch", "vhs"],
  "previewUrl": "/assets/previews/capa-single-glitch.png",
  "thumbnailUrl": "/assets/thumbnails/capa-single-glitch.jpg",
  "layers": [
    // Cada layer segue o schema do Fabric.js
  ]
}
```

## Entrega Esperada ao Final das Fases

* Projeto executÃ¡vel em Replit (`npm run dev`).
* Biblioteca de templates organizada e documentada.
* PÃ¡gina/App inicial da Zentraw importando editor + gallery.
* README com instruÃ§Ãµes de deploy e roadmap futuro.

---

### PrÃ³ximos Passos

Quando concluir **FaseÂ 0**, pare e aguarde autorizaÃ§Ã£o para continuar. Isso garante que nenhuma fase seguinte atrapalhe as anteriores.

Boa sorteÂ ğŸš€

---

## Compatibilidade e SoluÃ§Ã£o de Problemas

### Problema: ImportaÃ§Ã£o do Fabric.js falha em Replit

1. Instale o core e os tipos:

   ```bash
   npm install fabric @types/fabric --save
   ```
2. Importe como **default** ou **namespace** para evitar erro:

   ```ts
   import fabric from 'fabric';
   // ou
   import * as fabric from 'fabric';
   ```
3. Se usar Vite, adicione em `vite.config.ts`:

   ```ts
   optimizeDeps: {
     include: ['fabric']
   }
   ```

### Editor AvanÃ§ado (Canvaâ€‘like)

Para obter recursos comparÃ¡veis ao CanvaÂ Pro (crop, filtros, ajuste de cor, shapes complexos, mÃ¡scaras, history/undo, etc.), integre **TUIÂ ImageÂ Editor** como sobreâ€‘camada do Fabric:

```bash
npm install tui-image-editor @toast-ui/react-image-editor
```

Exemplo de uso em `AdvancedEditor.tsx`:

```tsx
import { ImageEditor } from '@toast-ui/react-image-editor';
import 'tui-image-editor/dist/tui-image-editor.css';

export default function AdvancedEditor() {
  return (
    <ImageEditor
      includeUI={{
        theme: {},
        initMenu: 'filter',
        menuBarPosition: 'left',
      }}
      cssMaxHeight={700}
      cssMaxWidth={900}
      selectionStyle={{ cornerSize: 20, rotatingPointOffset: 70 }}
      usageStatistics={false}
    />
  );
}
```

> **Dica:** mantenha `<CanvasEditor />` como wrapper: se TUI carregar, renderize `<AdvancedEditor />`; caso contrÃ¡rio, use Fabric core como fallback.

### Nova Subâ€‘FaseÂ 1.5Â â€”Â Funcionalidades AvanÃ§adas

1. Adicionar dependÃªncias **tui-image-editor** e **@toast-ui/react-image-editor**.
2. Implementar `<AdvancedEditor />` conforme exemplo acima.
3. Integrar ao Zustand store para persistir estado e permitir undo/redo multiâ€‘nÃ­vel.
4. Garantir exportaÃ§Ã£o em PNG/JPEG/SVG mantendo metadados.
5. Atualizar testes unitÃ¡rios e documentaÃ§Ã£o.

---
