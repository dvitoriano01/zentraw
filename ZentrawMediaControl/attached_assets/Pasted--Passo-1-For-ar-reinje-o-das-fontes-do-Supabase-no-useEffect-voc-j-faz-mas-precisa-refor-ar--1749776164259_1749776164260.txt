ğŸ” Passo 1: ForÃ§ar reinjeÃ§Ã£o das fontes do Supabase no useEffect (vocÃª jÃ¡ faz, mas precisa reforÃ§ar)
Garanta que isso aconteÃ§a em todas as telas com preview/template:

tsx
Copiar
Editar
useEffect(() => {
  if (serverFonts && serverFonts.length > 0) {
    setCustomFonts(serverFonts); // jÃ¡ faz
    injectFontsIntoDOM(serverFonts); // importante!
  }
}, [serverFonts]);
ğŸ’¾ Passo 2: Armazenar fontes no Supabase com ID estÃ¡vel
Certifique-se de que o name da fonte seja Ãºnico e consistente.

Se a mesma fonte for reupada, substitua no servidor.

ğŸ“¥ Passo 3: ReforÃ§ar o injectFontsIntoDOM para manter estilo vivo
Atualize sua funÃ§Ã£o para remover e recriar o <style id="zentraw-custom-fonts">:

tsx
Copiar
Editar
const injectFontsIntoDOM = (fonts: any[]) => {
  const existing = document.getElementById('zentraw-custom-fonts');
  if (existing) existing.remove();

  const style = document.createElement('style');
  style.id = 'zentraw-custom-fonts';
  let css = '';

  fonts.forEach(font => {
    if (font.base64) {
      const format = font.ext === 'ttf' ? 'truetype' :
                     font.ext === 'otf' ? 'opentype' :
                     font.ext === 'woff2' ? 'woff2' : 'woff';

      css += `
        @font-face {
          font-family: '${font.name}';
          src: url(data:font/${font.ext};base64,${font.base64}) format('${format}');
          font-display: swap;
        }
      `;
    }
  });

  style.textContent = css;
  document.head.appendChild(style);
};
ğŸ§  Passo 4: Evitar dependÃªncia de cache
Como alternativa extra:

VocÃª pode salvar os dados das fontes em um JSON local (no Supabase) que retorna todas as fontes serializadas em base64 e lÃª via API de /api/fonts.json.

Ou manter em cache via LocalStorage (no lado do cliente), assim:

tsx
Copiar
Editar
useEffect(() => {
  const cached = localStorage.getItem('zentraw_fonts');
  if (cached) {
    const parsed = JSON.parse(cached);
    injectFontsIntoDOM(parsed);
    setCustomFonts(parsed);
  }
}, []);

useEffect(() => {
  if (customFonts.length > 0) {
    localStorage.setItem('zentraw_fonts', JSON.stringify(customFonts));
  }
}, [customFonts]);
âœ… Resultado final esperado:
Fontes Freepik serÃ£o:

Persistidas no Supabase.

Recarregadas e injetadas no DOM sempre que a app abrir.

UtilizÃ¡veis no preview e export da imagem via applyTemplate.

Mesmo que Replit limpe a memÃ³ria temporÃ¡ria, as fontes serÃ£o restauradas automaticamente.